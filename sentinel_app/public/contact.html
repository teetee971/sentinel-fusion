<!doctype html><html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact • Sentinel</title>
  <link rel="stylesheet" href="/style.css" />
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
  <main class="container">
    <h1>Nous contacter</h1>
    <form id="f">
      <label>Nom <input name="name" required></label>
      <label>Email <input type="email" name="email" required></label>
      <label>Message <textarea name="message" rows="6" required></textarea></label>

      <!-- Remplace SITEKEY par ta vraie sitekey Turnstile -->
      <div class="cf-turnstile" data-sitekey="SITEKEY" data-theme="dark"></div>

      <button>Envoyer</button>
    </form>
    <pre id="out"></pre>
  </main>
<script type="module">
const f = document.querySelector('#f'), out = document.querySelector('#out');
f.addEventListener('submit', async (e) => {
  e.preventDefault(); out.textContent = 'Envoi...';
  const data = Object.fromEntries(new FormData(f).entries());
  const r = await fetch('/api/contact', {
    method:'POST',
    headers:{'content-type':'application/json'},
    body: JSON.stringify(data)
  });
  const j = await r.json().catch(()=>({}));
  out.textContent = r.ok ? '✔️ Message envoyé' : `❌ ${j.error||r.status}`;
});
</script>
</body></html>
